<!DOCTYPE html>
<html>
<body>

<p>Choose Source</p>
<form id="sources" action="">
 <input type="radio" name="src" id="src_home" value="home" checked>Home<br>
 <input type="radio" name="src" id="src_work" value="work">Work<br>
 <input type="radio" name="src" id="src_current_location" value="current_location" onClick="getCurrentLocation()"><label for="src_current_location">Current Location</label><br>
</form>

<p>Choose Destination</p>
<form name="dest" action="">
 <input type="radio" name="dest" id="dest_home" value="home" checked>Home<br>
 <input type="radio" name="dest" id="dest_work" value="work">Work<br>
</form>

<p><button id="get_routes_button" onclick="getRoutes()">GetRoutes</button></p>

<script>
function getCurrentLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(radioPosition, radioError);
  } else {
    disableCurrentLocation("Location information not supported.")
  }
}

function disableCurrentLocation(message) {
  var radio  = document.getElementById("src_current_location");
  var home  = document.getElementById("src_home");
  radio.disabled = true;
  radio.labels[0].innerText = "Current Location is not available:'" + message + "'";
  radio.checked = false;
  home.checked = true;
}

function radioPosition(position) {
  var radio  = document.getElementById("src_current_location");
  radio.value = position.coords.latitude + ", " + position.coords.longitude;
  radio.labels[0].innerText = "Current Location (" + position.coords.latitude + ", " + position.coords.longitude + ")";
}

function radioError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      disableCurrentLocation("Permission Denied")
        break;
    case error.POSITION_UNAVAILABLE:
      disableCurrentLocation("Position Unavailable")
        break;
    case error.TIMEOUT:
      disableCurrentLocation("Timeout")
        break;
    case error.UNKNOWN_ERROR:
      disableCurrentLocation("Unknown Error")
        break;
  }
}

function getRoutes(){
  var src_val = "`";
  var dest_val = "`";
  if (document.getElementById("src_current_location").checked) {
    src_val = document.getElementById("src_current_location").value;
  }
  if (document.getElementById("src_home").checked) {
    src_val = "`" + document.getElementById("src_home").value;
  }
  if (document.getElementById("src_work").checked) {
    src_val = "`" + document.getElementById("src_work").value;
  }

  if (document.getElementById("dest_home").checked) {
    dest_val = "`" + document.getElementById("dest_home").value;
  }
  if (document.getElementById("dest_work").checked) {
    dest_val = "`" + document.getElementById("dest_work").value;
  }

  window.location.href = "host:port/?genmail[" + src_val + ";" + dest_val + "]";
}

</script>

</body>
</html>
